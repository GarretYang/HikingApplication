<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Single Theme Page</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-carousel@4.0.4/dist/css/bulma-carousel.min.css">
        <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>

        <script src="../static/js/script.js"></script>

        <!-- <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"> -->
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.0.0/firebase-app.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/7.0.0/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.0.0/firebase-analytics.js"></script>

        <script>
            // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyDsD4q4i4JG25oubZs2dwv0V3wddWekBpk",
                authDomain: "apt-assignment-5-254402.firebaseapp.com",
                databaseURL: "https://apt-assignment-5-254402.firebaseio.com",
                projectId: "apt-assignment-5-254402",
                storageBucket: "apt-assignment-5-254402.appspot.com",
                messagingSenderId: "446297609093",
                appId: "1:446297609093:web:c152e2bb4ecc5066402aec",
                measurementId: "G-EM0XSW1ELE"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            firebase.analytics();
        </script>

        <script>
            if (typeof firebase === 'undefined') {
            const msg = "Please paste the Firebase initialization snippet into index.html. See https://console.firebase.google.com > Overview > Add Firebase to your web app.";
            console.log(msg);
            alert(msg);
            }
        </script>
    </head>
    <body>
            <section class="section">
                <div class="container">
                    <h1 class="title">
                        Theme Views
                    </h1>
                    <nav class="level">
                        <!-- Left side -->
                        <div class="level-left">
                        <div class="level-item">
                            <nav class="breadcrumb has-dot-separator" aria-label="breadcrumbs">
                                    <ul>
                                        <li><a href="/">Home</a></li>
                                        <li><a href="/personal">Manage</a></li>
                                        <li><a href="/newFeature">New Feature</a></li>
                                        <li><a href="/newReport">New Report</a></li>
                                    </ul>
                            </nav>
                            </div>
                        </div>
                        <!-- Right side -->
                        <div class="level-right">
                            <div class="field">
                                <!-- <a class="button is-success is-rounded">Rounded</a> -->
                                <div class="control">
                                    <div class="columns is-mobile">
                                        <a class="button is-info" onclick="searchFilter()">Search</a>
                                        <input class="input is-info" id="search-input" type="text" placeholder="Success input" onkeyup="clearFilter()"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </nav>        
                </div> 
            </section>

        <div class="feature" style="margin-bottom:100px">
            {% if theme_image %}
                <div id="carousel-demo" class="carousel">
					<div class="item-1">
						<img src="data:image/jpg;charset=utf-8;base64,{{ theme_image[0] }}" style="width:auto; height: 600px">
					</div>
					<div class="item-2">
						<img src="data:image/jpg;charset=utf-8;base64,{{ theme_image[1] }}" style="width:auto; height: 600px">
					</div>
					<div class="item-3">
						<img src="data:image/jpg;charset=utf-8;base64,{{ theme_image[2] }}" style="width:auto; height: 600px">
					</div>
				</div>
            {% endif %}
            {% if theme_tags %}
                <div class="top5-tags">
                    {% for tag in theme_tags %}
                    <span class="tag is-dark">{{ tag }}</span>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="reports">
            {% if reports[0]|length>0 %}
                {% for r in reports %}
                <div class="single-report" style="margin-bottom:100px">
                    <p>Name: {{ user_name[loop.index-1] }}</p>
                    <p>Date: {{ r['date_in'] }}</p>
                    <p>Description: {{ r['description'] }}</p>
                    
                    <div>
                        <p>Tags: 
                        {% for tag in r['tags'] %}
                            <span class="tag is-dark">{{ tag }}</span>
                        {% endfor %}</p>
                    </div>

                    {% for img in report_images[loop.index-1] %}
                        <img src="data:image/jpg;charset=utf-8;base64,{{ img }}" style="width:auto;height:300px;margin-top=20px">
                    {% endfor %}
                    <hr>
                </div>
                {% endfor %}
            {% else %}
                <p>There is no related report stored in our Mongo Database</p>
            {% endif %}
        </div>


        <script src="https://cdn.jsdelivr.net/npm/bulma-carousel@4.0.4/dist/js/bulma-carousel.min.js"></script>
		<script>
		bulmaCarousel.attach('#carousel-demo', {
			slidesToScroll: 1,
			slidesToShow: 4
		});
		</script>
    </body>
</html>